<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/AI-book/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/AI-book/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li:not(:nth-child(9)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(9) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(9) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(9) > ul.nav-list { display: block; } </style> <script src="/AI-book/assets/js/vendor/lunr.min.js"></script> <script src="/AI-book/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Tetris | L’IA en pratique avec python.</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Tetris" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Ce site web présente les exemples de programmes décrit dans le livre l’IA en pratique avec python. Ici sont présentés les différentes solutions des problèmes utilisants différentes techniques de l’IA implementés en python." /> <meta property="og:description" content="Ce site web présente les exemples de programmes décrit dans le livre l’IA en pratique avec python. Ici sont présentés les différentes solutions des problèmes utilisants différentes techniques de l’IA implementés en python." /> <link rel="canonical" href="https://iridia-ulb.github.io/AI-book/docs/tetris.html" /> <meta property="og:url" content="https://iridia-ulb.github.io/AI-book/docs/tetris.html" /> <meta property="og:site_name" content="L’IA en pratique avec python." /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Tetris" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Ce site web présente les exemples de programmes décrit dans le livre l’IA en pratique avec python. Ici sont présentés les différentes solutions des problèmes utilisants différentes techniques de l’IA implementés en python.","headline":"Tetris","url":"https://iridia-ulb.github.io/AI-book/docs/tetris.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/AI-book/" class="site-title lh-tight"> L'IA en pratique avec python. </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/AI-book/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/AI-book/instructions" class="nav-list-link">Instructions générales</a></li><li class="nav-list-item"><a href="/AI-book/faq" class="nav-list-link">Foire aux questions (FAQ)</a></li><li class="nav-list-item"><a href="/AI-book/docs/8puzzle.html" class="nav-list-link">Le Taquin</a></li><li class="nav-list-item"><a href="/AI-book/docs/shortest.html" class="nav-list-link">Le plus court chemin</a></li><li class="nav-list-item"><a href="/AI-book/docs/sudoku.html" class="nav-list-link">Sudoku</a></li><li class="nav-list-item"><a href="/AI-book/docs/snake.html" class="nav-list-link">Snake</a></li><li class="nav-list-item"><a href="/AI-book/docs/connect4.html" class="nav-list-link">Puissance 4</a></li><li class="nav-list-item"><a href="/AI-book/docs/tetris.html" class="nav-list-link">Tetris</a></li><li class="nav-list-item"><a href="/AI-book/docs/SpamDetec.html" class="nav-list-link">Spam Detector</a></li><li class="nav-list-item"><a href="/AI-book/docs/decisiontree.html" class="nav-list-link">Decision trees</a></li><li class="nav-list-item"><a href="/AI-book/docs/nlp.html" class="nav-list-link">Natural langage processing</a></li><li class="nav-list-item"><a href="/AI-book/docs/catdog.html" class="nav-list-link">Chien ou chat?</a></li><li class="nav-list-item"><a href="/AI-book/docs/SpamDetec2.html" class="nav-list-link">Spam Detector 2</a></li><li class="nav-list-item"><a href="/AI-book/docs/nanogpt.html" class="nav-list-link">NanoGPT</a></li><li class="nav-list-item"><a href="/AI-book/about" class="nav-list-link">À propos</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search L'IA en pratique avec python." aria-label="Search L'IA en pratique avec python." autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 id="tetris"> <a href="#tetris" class="anchor-heading" aria-labelledby="tetris"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Tetris </h1> <p>Vous trouverez ci-dessous les instructions et détails sur le jeu du tetris. Le but du jeu étant d’empiler le plus de pièce possibles pour former des lignes complètes afin de les faire disparaitres et gagner des points.</p> <p>Le jeu présenté ici utilise deux méthodes différentes: le premier est un réseau de neurones artificiels entrainé grâce à un algorithme d’apprentissage par renforcement (reinforcement learning), le deuxième est un controleur simple dont les paramètres sont optimisés grâce à un algorithme génétique.</p> <h2 id="installation"> <a href="#installation" class="anchor-heading" aria-labelledby="installation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installation </h2> <p>Pour installer l’application, commencez par copier le dépot du livre (<a href="https://github.com/iridia-ulb/AI-book">AI-book sur github</a>), soit en recupérant l’archive zip depuis github, soit à l’aide de l’outil git:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/iridia-ulb/AI-book
</code></pre></div></div> <p>Puis, accedez au dossier:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>Tetris
</code></pre></div></div> <p>Il y a ensuite deux sous-dossier, <code class="language-plaintext highlighter-rouge">TetrisRL</code> contient le programme fonctionnant avec l’apprentissage par renforcement (RL) et <code class="language-plaintext highlighter-rouge">TetrisGA</code> contient le programme fonctionnant avec l’algorithme génétique. Rendez vous dans un de ces dossier avant de passer à l’étape suivante, par exemple:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>TetrisGA
</code></pre></div></div> <p>Après avoir installé python et poetry, dans ce dossier, installez les dépendances du projet:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry <span class="nb">install</span>
</code></pre></div></div> <h2 id="utilisation-de-tetrisrl"> <a href="#utilisation-de-tetrisrl" class="anchor-heading" aria-labelledby="utilisation-de-tetrisrl"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Utilisation de TetrisRL </h2> <p>Pour lancer le jeu avec un réseau de neurones déjà entrainé:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run python main.py
</code></pre></div></div> <p>Vous pouvez ajouter une option pour choisir un modèle pré-entrainé différent de celui par défaut (“weights.h5”) avec l’option <code class="language-plaintext highlighter-rouge">-w</code>.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run python main.py <span class="nt">-w</span> weights2.h5
</code></pre></div></div> <p>Pour <strong>quitter</strong> le jeu, appuyez sur n’importe quelle touche dans la fenètre du jeu, ou appuyez sur Ctrl+c dans le terminal.</p> <p>En résumé:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usage: main.py [-h] [-w WEIGHTS]

The Tetris game

optional arguments:
  -h, --help            show this help message and exit
  -w WEIGHTS, --weights WEIGHTS
                        Path to weights file to load.
</code></pre></div></div> <h3 id="entrainement"> <a href="#entrainement" class="anchor-heading" aria-labelledby="entrainement"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Entrainement </h3> <p>Pour entrainer un nouveau réseau de neurones (Attention pour ce projet, il vous faudra probablement un bon GPU pour espérer entrainer le réseau dans un temps acceptable) vous pouvez utiliser le programme <code class="language-plaintext highlighter-rouge">train.py</code>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run python train.py <span class="nt">-e</span> 1000 <span class="nt">-w</span> weights2.h5
</code></pre></div></div> <p>Ici l’option <code class="language-plaintext highlighter-rouge">-e</code> représente le nombre d’épisodes pendant lequel le réseau doit être entrainé, 10000 étant la valeur par défaut, et <code class="language-plaintext highlighter-rouge">-w</code> représente le fichier dans lequel les poids synaptiques seront enregistrés à la fin de l’entrainement.</p> <p>En résumé:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usage: train.py [-h] [-w WEIGHTS] [-e EPISODES]

The Tetris game trainer for RL.

optional arguments:
  -h, --help            show this help message and exit
  -w WEIGHTS, --weights WEIGHTS
                        Path to weights file to save to (default=weights.h5).
  -e EPISODES, --episodes EPISODES
                        Number of episodes to train on (default=10000).
</code></pre></div></div> <p><img src="../assets/img/tetris.png" alt="tetris screen" /></p> <h2 id="utilisation-de-tetrisga"> <a href="#utilisation-de-tetrisga" class="anchor-heading" aria-labelledby="utilisation-de-tetrisga"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Utilisation de TetrisGA </h2> <p>Pour lancer le jeu avec uni controleur déjà entrainé:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run python evaluation.py
</code></pre></div></div> <p>Vous pouvez ajouter une option pour choisir un modèle pré-entrainé différent de celui par défaut (“le dossier “SavedModel) avec l’option <code class="language-plaintext highlighter-rouge">-d</code>.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run python evaluation.py <span class="nt">-w</span> temp_train/
</code></pre></div></div> <p>Il est aussi possible de regler le nombre maximum de tetrominos avant l’arrêt du jeu avec l’option <code class="language-plaintext highlighter-rouge">-t</code>.</p> <p>En résumé:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usage: evaluation.py <span class="o">[</span><span class="nt">-h</span><span class="o">]</span> <span class="o">[</span><span class="nt">-d</span> DIRECTORY] <span class="o">[</span><span class="nt">-t</span> TETROMINOES_LIMIT]

The Tetris game

optional arguments:
  <span class="nt">-h</span>, <span class="nt">--help</span>            show this <span class="nb">help </span>message and <span class="nb">exit</span>
  <span class="nt">-d</span> DIRECTORY, <span class="nt">--directory</span> DIRECTORY
                        Path of saved generation on which to evaluate the best
                        agent
  <span class="nt">-t</span> TETROMINOES_LIMIT, <span class="nt">--tetrominoes_limit</span> TETROMINOES_LIMIT
                        The maximum number of tetrominoes after which the
                        evaluation stops
</code></pre></div></div> <h3 id="entrainement-1"> <a href="#entrainement-1" class="anchor-heading" aria-labelledby="entrainement-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Entrainement </h3> <p>Pour entrainer le modèle avec l’algorithme génétique, il suffit de lancer en utilisant le script <code class="language-plaintext highlighter-rouge">training.py</code></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run python training.py
</code></pre></div></div> <p>Cette commande lancera l’interface pour configurer l’entrainement, vous pouvez y choisir: les différent termes de l’heuristique à considérer, le nombre de générations de l’entrainement, et la limite de temps pour chaque génération.</p> <p>Une fois l’entrainement fini (ou annulé en quittant), un graphique s’affiche sur l’écran reprenant les données de la performance du modèle en fonction de la génération.</p> <p>Les résultats sont sauvegardés dans le dossier <code class="language-plaintext highlighter-rouge">temp_train/</code></p> <p><img src="../assets/img/tetrisga.png" alt="tetrisGA screen" /></p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
